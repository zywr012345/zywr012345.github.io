import{a as X,r as $,e as j,n as _,x as u,y as c,z as b,A as m,B as z,C as F,D as R,E as x,F as L,G as Y,H as V}from"../@vue/@vue.426c8735.js";const G=(d,v)=>{const p=d.__vccOpts||d;for(const[s,f]of v)p[s]=f;return p},D=d=>(F("data-v-e030df06"),d=d(),R(),d),H=[D(()=>b("div",{class:"iconfont icon-yuyinjiantou"},null,-1))],q=[D(()=>b("div",{class:"iconfont icon-yuyinjiantou"},null,-1))],J={key:0,class:"indicator-box"},K=["onClick"],E=G(Object.assign({name:"rSwiper"},{__name:"swiper",props:{fast:{type:Boolean,default:!1},autoPlay:{type:Boolean,default:!0},playTime:{type:[Number,String],default:5e3},speed:{type:Number,default:500},therehold:{type:[Number,String],default:100},slide:{type:Number,default:0},indicator:{type:Boolean,default:!0},indicatorFlash:{type:Boolean,default:!0},noMove:{type:String,default:"cs"},mobile:{type:Boolean,default:!1},vLock:{default:!1}},emits:["loadEnd","transitionend"],setup(d,{expose:v,emit:p}){const s=d;function f(o){return Array.prototype.slice.call(o)}const e=X({noMove:!1,pSlide:0,be:null,dim:!1,dst:0,drd:0,dsw:0,ds:null,dsn:0,drsn:0,dc:0,dt:null,pos:{sx:0,mx:0,ex:0,sy:0,my:0,l:0,d:0},moving:!1,u:!1,A:"",mousedown:!1,I:!1,v:!1,x:!1});let l=$(null);function y(){e.dt&&clearTimeout(e.dt),e.dt=null,e.dt=setTimeout(()=>{e.moving=!0,e.u=!1,r(s.speed),i(-(e.dsw+Math.abs(n())+l.value.parentNode.getBoundingClientRect().left))},+s.playTime)}function i(o){l.value.style.transform="translate3d("+o+"px, 0, 0)"}function r(o){l.value.style.transitionDuration=o+"ms"}function g(){let o=Math.round(Math.abs(n())/e.dsw);e.dc=o-1}function P(){e.moving=!0,_(()=>{setTimeout(()=>{r(0),g();let o=e.dc+1;o>=e.dsn-1?(i(-e.dsw),e.dc=0):o===0&&(i(-e.dsw*(e.dsn-2)),e.dc=e.dsn-3),p("transitionend",e.dc),e.moving=!1,s.autoPlay&&y()},0)})}function M(o){if(o.target.className.indexOf(s.noMove)!==-1||e.I)e.noMove=!0;else if(e.noMove=!1,!e.moving&&!e.v){if(o.type==="mousedown")e.mousedown=!0,e.pos.sx=o.pageX,e.pos.l=n(),clearTimeout(e.dt),r(0);else{e.A=f(o.changedTouches)[0].identifier;let t=o.touches.length-1;clearTimeout(e.dt),r(0),e.u=!0,e.pos.sx=o.touches[t].clientX,e.pos.sy=o.touches[t].clientY,e.pos.l=n()}s.fast&&(e.dst=new Date)}}function T(o){if(e.mousedown||e.u){if(e.noMove||e.I)return;if(!e.moving&&!e.v){if(o.type==="mousemove")e.mousedown&&(e.pos.mx=o.pageX,e.pos.d=e.pos.mx-e.pos.sx,i(e.pos.l+e.pos.d),g());else if(e.u){let t=o.touches.length-1;e.pos.mx=o.touches[t].clientX,e.pos.d=e.pos.mx-e.pos.sx,e.x||Math.abs(o.touches[t].clientY-e.pos.sy)<Math.abs(e.pos.d)?(e.v=!1,e.x=!0):(e.v=!0,e.x=!1,e.moving=!1),e.x&&(e.v=!1,e.x=!0,i(e.pos.l+e.pos.d),g())}}}}function k(o){if(e.noMove||e.I||e.v)e.v=!1;else if(e.x=!1,!e.moving)if(s.fast&&(e.dst=new Date-e.dst),o.type==="mouseup")e.mousedown&&(e.mousedown=!1,e.pos.ex=o.pageX,e.pos.d=e.pos.ex-e.pos.sx,B());else{let t=f(o.changedTouches)[0].identifier;!e.moving&&e.u&&t==e.A&&(e.u=!1,e.pos.ex=o.changedTouches[0].clientX,e.pos.d=e.pos.ex-e.pos.sx,B())}}function B(){g(),e.drd=s.fast&&e.dst<s.speed?e.dst:s.speed,r(e.drd);let o=Math.abs(n())%e.dsw,t=[],h="";if(t=n()>0?[o,e.dsw-o]:[e.dsw-o,o],(h=e.pos.d>0?"to-right":e.pos.d<0?"to-left":"none")=="none"&&s.autoPlay&&y(),h==="to-right")if(e.moving=!0,t[0]>+s.therehold){i(n()+t[1]);let a=(n()+t[1])/e.dsw;Math.abs(a)===0&&(e.u=!1)}else i(n()-t[0]);if(h==="to-left")if(e.moving=!0,t[1]>+s.therehold){i(n()-t[0]);let a=(n()-t[0])/e.dsw;Math.abs(a)===e.dsn-1&&(e.u=!1)}else i(n()+t[1]);e.noMove=!1}function n(){return l.value.getBoundingClientRect().left}function S(o){if(!e.moving){let t=Math.round(Math.abs(n())/e.dsw);if(o>e.dsn-2-1||o<0||t==o+1)return;e.moving=!0,clearTimeout(e.dt),r(s.speed),i(-e.dsw*(o+1))}}function C(){w(!0)}function N(){w(!1)}function w(o){s.fast&&(e.drd=new Date-e.be,e.drd=e.drd<s.speed?e.drd:s.speed,e.be=new Date),e.moving||(clearTimeout(e.dt),e.moving=!0,r(e.drd),i(o?n()+e.dsw:n()-e.dsw))}function O(o){s.vLock&&o.preventDefault()}function I(o){return o===e.dc||o+e.drsn===e.dc||o-e.drsn===e.dc}return e.drd={...s}.speed,e.pSlide={...s}.slide,e.dim=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),j(()=>{_(()=>{e.dsw=l.value.getBoundingClientRect().width,e.ds=f(l.value.children),e.drsn=e.ds.length,e.dsn=e.ds.length,e.drsn===1?e.I=!0:function(){let o=e.ds[0].cloneNode(e.ds[0],!0),t=e.ds[e.dsn-1].cloneNode(e.ds[e.dsn-1],!0);l.value.appendChild(o),l.value.insertBefore(t,e.ds[0]),e.ds=f(l.value.children),e.dsn=e.ds.length,function(){if(e.pSlide<0||e.pSlide>e.dsn-2-1)throw new Error("[r-swiper:Error]: You set an abnormal subscript, please check and reassign: slide"+e.pSlide);i(-e.dsw*(e.pSlide+1)),s.autoPlay&&y(),p("loadEnd"),console.log("%c 🚀 ~ 我写的代码 像诗一样优雅 ","background: linear-gradient(to right, orange, yellow, green, skyblue, indigo, violet, #471290); color: white; font-size: 16px;")}()}()})}),v({go:w,next:N,prev:C,slideTo:S}),(o,t)=>(u(),c("div",{class:"r-swiper-style",style:z({"--speed":e.drd+"ms"}),onTouchmove:O},[b("div",{class:"r-swiper-box",ref_key:"swiper",ref:l,onTransitionend:P,onTouchstart:M,onMousedown:M,onTouchmove:T,onMousemove:T,onTouchend:k,onMouseup:k},[m(o.$slots,"default",{},void 0,!0)],544),m(o.$slots,"leftBtn",{},()=>[s.mobile||e.dim?x("",!0):(u(),c("div",{key:0,class:"btn-box left-btn",onClick:C},H))],!0),m(o.$slots,"rightBtn",{},()=>[s.mobile||e.dim?x("",!0):(u(),c("div",{key:0,class:"btn-box",onClick:N},q))],!0),m(o.$slots,"indicator",{},()=>[s.indicator?(u(),c("div",J,[(u(!0),c(L,null,Y(e.drsn,(h,a)=>(u(),c("div",{onClick:U=>S(a),key:a,class:V(["dot",{"dot-pc":!e.dim,"dot-active":I(a),flash:d.indicatorFlash&&I(a)}])},null,10,K))),128))])):x("",!0)],!0),m(o.$slots,"all",{},void 0,!0)],36))}}),[["__scopeId","data-v-e030df06"]]),Q={class:"r-slide-style"},A=Object.assign({name:"rSlide"},{__name:"slide",setup:d=>(v,p)=>(u(),c("div",Q,[m(v.$slots,"default")]))}),Z=d=>{d.component(E.name,E),d.component(A.name,A)};export{Z as R,E as i,A as r};
