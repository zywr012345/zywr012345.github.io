const e=require("vue"),t=(e,t)=>{const o=e.__vccOpts||e;for(const[n,d]of t)o[n]=d;return o},o=t=>(e.pushScopeId("data-v-a1bdae5b"),t=t(),e.popScopeId(),t),n=[o((()=>e.createElementVNode("div",{class:"iconfont icon-yuyinjiantou"},null,-1)))],d=[o((()=>e.createElementVNode("div",{class:"iconfont icon-yuyinjiantou"},null,-1)))],s={key:0,class:"indicator-box"},l=["onClick"],i=t({__name:"swiper",props:{fast:{type:Boolean,default:!1},autoPlay:{type:Boolean,default:!0},playTime:{type:[Number,String],default:5e3},speed:{type:Number,default:500},therehold:{type:[Number,String],default:100},slide:{type:Number,default:0},indicator:{type:Boolean,default:!0},indicatorFlash:{type:Boolean,default:!0},noMove:{type:String,default:"cs"},mobile:{type:Boolean,default:!1},vLock:{default:!1}},emits:["loadEnd","transitionend"],setup(t,{expose:o,emit:i}){const a=t;function r(e){return Array.prototype.slice.call(e)}const c=e.reactive({pSlide:0,be:null,dim:!1,dst:0,drd:0,dsw:0,ds:null,dsn:0,drsn:0,dc:0,dt:null,pos:{sx:0,mx:0,ex:0,l:0,d:0},moving:!1,u:!1,A:"",mousedown:!1,I:!1});let u=e.ref(null);function p(){c.dt&&clearTimeout(c.dt),c.dt=null,c.dt=setTimeout((()=>{c.moving=!0,c.u=!1,f(a.speed),m(-(c.dsw+Math.abs(x())-Math.abs(u.value.parentNode.getBoundingClientRect().left)))}),+a.playTime)}function m(e){u.value.style.transform="translate3d("+e+"px, 0, 0)"}function f(e){u.value.style.transitionDuration=e+"ms"}function v(){let e=Math.round(Math.abs(x())/c.dsw);c.dc=e-1}function h(){c.moving=!0,e.nextTick((()=>{setTimeout((()=>{f(0),v();let e=c.dc+1;e===c.dsn-1?(m(-c.dsw),c.dc=0):0===e&&(m(-c.dsw*(c.dsn-2)),c.dc=c.dsn-3),i("transitionend",c.dc),c.moving=!1,a.autoPlay&&p()}),0)}))}function g(e){if(-1===e.target.className.indexOf(a.noMove)&&!c.I&&!c.moving){if("mousedown"===e.type)c.mousedown=!0,c.pos.sx=e.pageX,c.pos.l=x(),clearTimeout(c.dt),f(0);else{c.A=r(e.changedTouches)[0].identifier;let t=e.touches.length-1;clearTimeout(c.dt),f(0),c.u=!0,c.pos.sx=e.touches[t].clientX,c.pos.l=x()}a.fast&&(c.dst=new Date)}}function y(e){if(-1===e.target.className.indexOf(a.noMove)&&!c.I&&!c.moving)if("mousemove"===e.type)c.mousedown&&(c.pos.mx=e.pageX,c.pos.d=c.pos.mx-c.pos.sx,m(c.pos.l+c.pos.d),v());else if(!c.moving&&c.u){let t=e.touches.length-1;c.pos.mx=e.touches[t].clientX,c.pos.d=c.pos.mx-c.pos.sx,m(c.pos.l+c.pos.d),v()}}function w(e){if(-1===e.target.className.indexOf(a.noMove)&&!c.I&&!c.moving)if(a.fast&&(c.dst=new Date-c.dst),"mouseup"===e.type)c.mousedown&&(c.mousedown=!1,c.pos.ex=e.pageX,c.pos.d=c.pos.ex-c.pos.sx,b());else{let t=r(e.changedTouches)[0].identifier;!c.moving&&c.u&&t==c.A&&(c.u=!1,c.pos.ex=e.changedTouches[0].clientX,c.pos.d=c.pos.ex-c.pos.sx,b())}}function b(){v(),c.drd=a.fast&&c.dst<a.speed?c.dst:a.speed,f(c.drd);let e=Math.abs(x())%c.dsw,t=[],o="";if(t=x()>0?[e,c.dsw-e]:[c.dsw-e,e],o=c.pos.d>0?"to-right":c.pos.d<0?"to-left":"none","none"==o&&a.autoPlay&&p(),"to-right"===o)if(c.moving=!0,t[0]>+a.therehold){m(x()+t[1]);let e=(x()+t[1])/c.dsw;0===Math.abs(e)&&(c.u=!1)}else m(x()-t[0]);if("to-left"===o)if(c.moving=!0,t[1]>+a.therehold){m(x()-t[0]);let e=(x()-t[0])/c.dsw;Math.abs(e)===c.dsn-1&&(c.u=!1)}else m(x()+t[1])}function x(){return u.value.getBoundingClientRect().left}function k(e){if(!c.moving){let t=Math.round(Math.abs(x())/c.dsw);if(e>c.dsn-2-1||e<0||t==e+1)return;c.moving=!0,clearTimeout(c.dt),f(a.speed),m(-c.dsw*(e+1))}}function B(){M(!0)}function T(){M(!1)}function M(e){a.fast&&(c.drd=new Date-c.be,c.drd=c.drd<a.speed?c.drd:a.speed,c.be=new Date),c.moving||(clearTimeout(c.dt),c.moving=!0,f(c.drd),m(e?x()+c.dsw:x()-c.dsw))}function S(e){a.vLock&&e.preventDefault()}function N(e){return e===c.dc||e+c.drsn===c.dc||e-c.drsn===c.dc}return c.drd={...a}.speed,c.pSlide={...a}.slide,c.dim=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),e.onMounted((()=>{e.nextTick((()=>{c.dsw=u.value.getBoundingClientRect().width,c.ds=r(u.value.children),c.drsn=c.ds.length,c.dsn=c.ds.length,1===c.drsn?c.I=!0:function(){let e=c.ds[0].cloneNode(c.ds[0],!0),t=c.ds[c.dsn-1].cloneNode(c.ds[c.dsn-1],!0);u.value.appendChild(e),u.value.insertBefore(t,c.ds[0]),c.ds=r(u.value.children),c.dsn=c.ds.length,function(){if(c.pSlide<0||c.pSlide>c.dsn-2-1)throw new Error("[r-swiper:Error]: You set an abnormal subscript, please check and reassign: slide"+c.pSlide);m(-c.dsw*(c.pSlide+1)),a.autoPlay&&p(),i("loadEnd")}()}()}))})),o({go:M,next:T,prev:B,slideTo:k}),(o,i)=>(e.openBlock(),e.createElementBlock("div",{class:"r-swiper-style",style:e.normalizeStyle({"--speed":c.drd+"ms"}),onTouchmove:S},[e.createElementVNode("div",{class:"r-swiper-box",ref_key:"swiper",ref:u,onTransitionend:h,onTouchstart:g,onMousedown:g,onTouchmove:y,onMousemove:y,onTouchend:w,onMouseup:w},[e.renderSlot(o.$slots,"default",{},void 0,!0)],544),e.renderSlot(o.$slots,"leftBtn",{},(()=>[a.mobile||c.dim?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"btn-box left-btn",onClick:B},n))]),!0),e.renderSlot(o.$slots,"rightBtn",{},(()=>[a.mobile||c.dim?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"btn-box",onClick:T},d))]),!0),e.renderSlot(o.$slots,"indicator",{},(()=>[a.indicator?(e.openBlock(),e.createElementBlock("div",s,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.drsn,((o,n)=>(e.openBlock(),e.createElementBlock("div",{onClick:e=>k(n),key:n,class:e.normalizeClass(["dot",{"dot-pc":!c.dim,"dot-active":N(n),flash:t.indicatorFlash&&N(n)}])},null,10,l)))),128))])):e.createCommentVNode("",!0)]),!0),e.renderSlot(o.$slots,"all",{},void 0,!0)],36))}},[["__scopeId","data-v-a1bdae5b"]]),a={class:"r-slide-style"};const r=t({},[["render",function(t,o){return e.openBlock(),e.createElementBlock("div",a,[e.renderSlot(t.$slots,"default")])}]]);export{i as L,r as q};
